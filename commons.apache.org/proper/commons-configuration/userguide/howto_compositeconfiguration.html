<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 10 June 2024
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="iso-8859-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <meta name="author" content="Eric Pugh" />
                <meta name="Date-Revision-yyyymmdd" content="20240610" />
            <meta http-equiv="Content-Language" content="en" />
        <title>Commons Configuration &#x2013; Composite Configuration Details</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/prettify.min.js"></script>
    <script type="text/javascript" src="../js/site.js"></script>

    
      </head>

  <body class="composite">
                      <a href="https://commons.apache.org/" id="bannerLeft" title="Apache Commons logo">
                                                                    <img class="logo-left" src="      ../images/commons-logo.png
"  alt="Apache Commons logo"/>
              </a>
                                          <a href="../index.html" id="bannerRight">
                                                                          <img class="logo-right" src="    ../images/logo.png
"  alt="Commons Configuration"/>
              </a>
          <div class="clear"></div>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="brand" href="https://commons.apache.org/proper/commons-configuration/">Apache Commons Configuration &trade;</a>
          <ul class="nav">      
                    
          <li id="publishDate">Last Published: 10 June 2024</li>
    <li class="divider">|</li> <li id="projectVersion">Version: 2.11.0</li>
  </ul>
          <div class="pull-right">  <ul class="nav">
            <li>
                  <a href="https://www.apachecon.com/" class="externalLink" title="ApacheCon">
    ApacheCon</a>
      </li>
          <li>
                  <a href="https://www.apache.org" class="externalLink" title="Apache">
    Apache</a>
      </li>
          <li>
                  <a href="../../../" title="Commons">
    Commons</a>
      </li>
    </ul>
</div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <table class="layout-table">
        <tr>
          <td class="sidebar">
            <div class="well sidebar-nav">
                    <ul class="nav nav-list">
                           <li class="nav-header">Commons Configuration</li>
                                        <li class="none">
                  <a href="../index.html" title="Overview">
    Overview</a>
          </li>
                             <li class="none">
                  <a href="../../../configuration/download_configuration.cgi" title="Download">
    Download</a>
          </li>
                             <li class="none">
                  <a href="../issue-tracking.html" title="Issue Tracking">
    Issue Tracking</a>
          </li>
                             <li class="none">
                  <a href="../security.html" title="Security">
    Security</a>
          </li>
                 </ul>
      <ul class="nav nav-list">
                           <li class="nav-header">Documentation</li>
                                        <li class="none">
                  <a href="../building.html" title="Building">
    Building</a>
          </li>
                             <li class="none">
                  <a href="../changes-report.html" title="Release History">
    Release History</a>
          </li>
                                                                                                                                                       <li class="collapsed">
                  <a href="../index.html" title="2.11.0">
    2.11.0</a>
                    </li>
                                                                                                                   <li class="collapsed">
                  <a href="../index.html" title="1.10">
    1.10</a>
                    </li>
                 </ul>
      <ul class="nav nav-list">
                                 <li class="nav-header"><i class="icon-info-sign"></i>Project Documentation</li>
                                                                                                                                                                                                                                                                                                <li class="collapsed">
                  <a href="../project-info.html" title="Project Information">
    Project Information</a>
                    </li>
                                                                                                                                                                                                                                                                   <li class="collapsed">
                  <a href="../project-reports.html" title="Project Reports">
    Project Reports</a>
                    </li>
                 </ul>
      <ul class="nav nav-list">
                           <li class="nav-header">Commons</li>
                                        <li class="none">
                  <a href="../../../" title="Home">
    Home</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/licenses/" class="externalLink" title="License">
    License</a>
          </li>
                                                                               <li class="collapsed">
                  <a href="../../../components.html" title="Components">
    Components</a>
                    </li>
                                                                               <li class="collapsed">
                  <a href="../../../sandbox/index.html" title="Sandbox">
    Sandbox</a>
                    </li>
                                                                               <li class="collapsed">
                  <a href="../../../dormant/index.html" title="Dormant">
    Dormant</a>
                    </li>
                 </ul>
      <ul class="nav nav-list">
                           <li class="nav-header">General Information</li>
                                        <li class="none">
                  <a href="../../../security.html" title="Security">
    Security</a>
          </li>
                             <li class="none">
                  <a href="../../../volunteering.html" title="Volunteering">
    Volunteering</a>
          </li>
                             <li class="none">
                  <a href="../../../patches.html" title="Contributing Patches">
    Contributing Patches</a>
          </li>
                             <li class="none">
                  <a href="../../../building.html" title="Building Components">
    Building Components</a>
          </li>
                             <li class="none">
                  <a href="../../../commons-parent-pom.html" title="Commons Parent POM">
    Commons Parent POM</a>
          </li>
                             <li class="none">
                  <a href="../../../build-plugin/index.html" title="Commons Build Plugin">
    Commons Build Plugin</a>
          </li>
                             <li class="none">
                  <a href="../../../release-plugin/index.html" title="Commons Release Plugin">
    Commons Release Plugin</a>
          </li>
                             <li class="none">
                  <a href="../../../site-publish.html" title="Site Publication">
    Site Publication</a>
          </li>
                             <li class="none">
                  <a href="../../../releases/index.html" title="Releasing Components">
    Releasing Components</a>
          </li>
                             <li class="none">
                  <a href="https://cwiki.apache.org/confluence/display/commons/FrontPage" class="externalLink" title="Wiki">
    Wiki</a>
          </li>
                 </ul>
      <ul class="nav nav-list">
                           <li class="nav-header">ASF</li>
                                        <li class="none">
                  <a href="https://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">
    How the ASF works</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">
    Get Involved</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/dev/" class="externalLink" title="Developer Resources">
    Developer Resources</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/foundation/policies/conduct.html" class="externalLink" title="Code of Conduct">
    Code of Conduct</a>
          </li>
                             <li class="none">
                  <a href="https://privacy.apache.org/policies/privacy-policy-public.html" class="externalLink" title="Privacy">
    Privacy</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">
    Sponsorship</a>
          </li>
                             <li class="none">
                  <a href="https://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
    Thanks</a>
          </li>
                 </ul>
              </div>
            <div id="poweredBy">
                                                                                                                    <a href="https://www.apache.org/events/current-event.html" title="ApacheCon" class="builtBy">
        <img class="builtBy"  alt="ApacheCon" src="https://www.apache.org/events/current-event-125x125.png"    />
      </a>
                                                                                                    <a href="https://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="https://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                      </div>
          </td>
          <td class="content">
                                                                          

 

    <section>
<h2><a name="Composite_Configuration_Details"></a>Composite Configuration Details</h2>
        
<p>
            There are many use cases when you want to collect the properties
            of several configuration sources and access them like a single
            configuration object. One way to do that is using the
            <code><a href="../apidocs/org/apache/commons/configuration2/CompositeConfiguration.html">
            CompositeConfiguration</a></code> class.
        </p>
        
<p>
            A <code>CompositeConfiguration</code> object contains a list of
            other configuration objects. When properties are accessed from a
            composite configuration the object takes the passed in property key
            and iterates over the list of the contained configurations. As soon
            as a value is found for the key it is returned. This means that a
            <code>CompositeConfiguration</code> implements a kind of override
            semantics, i.e. the properties of configurations that were added
            first hide the property values of configurations added later.
        </p>
    	
<p>
    		We will discuss how you can establish a &quot;default&quot; choice for your
    		Composite Configuration as well as save changes made to your
    		Composite Configuration.
    	</p>
        <section>
<h3><a name="Setting_Up_Defaults"></a>Setting Up Defaults</h3>
        
<p>
          Defaults are very simple. You can just add them as your last configuration object:
    		</p>
    			
<div class="source">
<pre>
Parameters params = new Parameters();
FileBasedConfigurationBuilder&lt;Configuration&gt; builderDefaults =
    new FileBasedConfigurationBuilder&lt;Configuration&gt;(PropertiesConfiguration.class)
    .configure(params.properties()
        .setFile(fileToDefaults));
FileBasedConfigurationBuilder&lt;Configuration&gt; builderOther =
    new FileBasedConfigurationBuilder&lt;Configuration&gt;(PropertiesConfiguration.class)
    .configure(params.properties()
        .setFile(fileToOtherProperties));

CompositeConfiguration cc = new CompositeConfiguration();
cc.addConfiguration(builderOther.getConfiguration());
cc.addConfiguration(builderDefaults.getConfiguration());
</pre></div>
		</section>

		<section>
<h3><a name="Saving_Changes"></a>Saving Changes</h3>
			
<p>
				If you have a non static Configuration where you want to
				save changes made to a configuration, and you are using a
				CompositeConfiguration, then you will need to pass into
				the constructor of the CompositeConfiguration what Configuration
				to save the changes via.
			</p>
    			
<div class="source">
<pre>
Parameters params = new Parameters();
FileBasedConfigurationBuilder&lt;Configuration&gt; builder =
    new FileBasedConfigurationBuilder&lt;Configuration&gt;(PropertiesConfiguration.class, null, true)
    .configure(params.properties()
        .setFile(fileToSaveChangesIn));

Configuration cc = new CompositeConfiguration(builder.getConfiguration());
cc.setProperty(&quot;newProperty&quot;,&quot;new value&quot;);

builder.save();
</pre></div>
			
<p>
				Alternatively, you can just request the
				in-memory configuration that stores the changes. The following
                example fragment copies all properties from the in-memory
                configuration into a <code>PropertiesConfiguration</code>, which
                can be saved later:
    			</p>
<div class="source">
<pre>
Configuration changes = myCompositeConfiguration.getInMemoryConfiguration();
FileBasedConfigurationBuilder&lt;PropertiesConfiguration&gt; builder =
    new FileBasedConfigurationBuilder&lt;PropertiesConfiguration&gt;(PropertiesConfiguration.class);
PropertiesConfiguration config = builder.getConfiguration();
for (Iterator&lt;String&gt; i = changes.getKeys(); i.hasNext()){
    String key = i.next();
    Object value = changes.get(key);
    config.setProperty(key,value);
}
</pre></div>
			

		</section>
	</section>



                      </td>
        </tr>
      </table>
    </div>

    <div class="footer">
      <p>Copyright &copy;                    2001-2024
                      <a href="https://www.apache.org/">The Apache Software Foundation</a>.
            All Rights Reserved.</p>
                                        
<div class="center">Apache Commons, Apache Commons Configuration, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation.
      All other marks mentioned may be trademarks or registered trademarks of their respective owners.</div>
                  </div>
  </body>

</html>